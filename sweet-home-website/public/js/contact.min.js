(()=>{const e=document.querySelector(".office-card");if(!e)return;const t=e.querySelector(".shine");let n=null;e.addEventListener("pointermove",function(a){const o=e.getBoundingClientRect(),c=(a.clientX-o.left)/o.width,s=(a.clientY-o.top)/o.height,r=8*(.5-s),i=10*(c-.5),l=8*(c-.5),u=6*(s-.5);n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>{if(e.style.transform=`perspective(800px) rotateX(${r}deg) rotateY(${i}deg) translate(${l}px, ${u}px)`,t){t.style.opacity="1";const e=100*c,n=100*s;t.style.background=`radial-gradient(600px 600px at ${e}% ${n}%, rgba(255,255,255,.20), rgba(255,255,255,0) 45%)`}})}),e.addEventListener("pointerenter",function(){e.classList.add("hovering"),t&&(t.style.opacity="1")}),e.addEventListener("pointerleave",function(){e.classList.remove("hovering"),e.style.transform="",t&&(t.style.opacity="0")})})(),(()=>{const e=document.querySelector(".contact-form");if(!e)return;const t=e.querySelector('button[type="submit"]'),n=document.createElement("div");n.className="form-message",e.appendChild(n),e.addEventListener("submit",async a=>{try{a.preventDefault(),n.className="form-message",n.textContent="",t.disabled=!0;const c=new FormData(e);c.get("lead_type")||c.set("lead_type","unknown");const s=e.querySelector("#language");s&&c.set("language",s.value||"");const r=new URLSearchParams(location.search),i=(e,t)=>{!c.get(e)&&t&&c.set(e,t)};i("utm_source",r.get("utm_source")),i("utm_medium",r.get("utm_medium")),i("utm_campaign",r.get("utm_campaign")),i("utm_term",r.get("utm_term")),i("utm_content",r.get("utm_content")),i("referrer",document.referrer),i("page_path",location.pathname);const l=c.get("countryCode")||"",u=c.get("phone")||"";(l||u)&&c.set("phone",`${l} ${u}`.trim());var o=e.getAttribute("data-recaptcha-site-key");if(o&&window.grecaptcha&&"function"==typeof grecaptcha.execute)try{const e=await grecaptcha.execute(o,{action:"contact"});c.get("recaptchaToken")||c.set("recaptchaToken",e||"")}catch(e){}const m=new URLSearchParams;for(const[e,t]of c.entries())m.append(e,t);const d=await fetch("/api/leads/contact",{method:"POST",headers:{"x-csrf-token":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:m.toString()}),g=await d.json().catch(()=>({success:!1}));if(!(d.ok&&g&&g.success))throw new Error(g&&g.message||"Unable to send your message. Please try again.");if(window.analytics&&window.analytics.trackFormSubmit){const e=c.get("lead_type")||"unknown";window.analytics.trackFormSubmit("seller"===e?"seller_form":"contact_form",null,null)}n.classList.add("success"),n.textContent=window.i18nGetHome?i18nGetHome("contact.sent","Thank you! Your message has been sent successfully."):"Thank you! Your message has been sent successfully.",e.reset()}catch(e){n.classList.add("error"),n.textContent=e.message||"Something went wrong. Please try again later."}finally{t.disabled=!1}})})();