document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("mp-data");let t={};try{t=JSON.parse(e?.getAttribute("data-locations")||"{}")}catch(e){t={}}const n=document.getElementById("countrySelect"),o=document.getElementById("citySelect"),l=document.getElementById("filterForm");n&&o&&l&&n.addEventListener("change",()=>{const e=n.value,l=t[e]||{},a=Object.keys(l);o.innerHTML='<option value="">All Cities</option>',a.length?(a.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,o.append(t)}),o.disabled=!1):o.disabled=!0,o.value=""}),document.querySelectorAll("form.reassign-form").forEach(e=>{const t=e.querySelector('select[name="agent_id"]');if(!t)return;let n=t.value;t.addEventListener("change",()=>{t.value!==n&&((()=>{if(e.__submitting)return;e.__submitting=!0;const t=document.getElementById("reassignOverlay");t&&(t.hidden=!1,t.style.display="flex"),"function"==typeof e.requestSubmit?e.requestSubmit():e.submit()})(),n=t.value)})})});