!function(){let e={};try{const t=document.getElementById("i18n-owners");t&&(e=JSON.parse(t.getAttribute("data-i18n")||"{}"))}catch(e){}const t=(t,n)=>{try{return t.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:void 0,e)??n}catch(e){return n}},n=document.getElementById("soldCarousel");if(n){const e=n.querySelector(".sold-track");if(e){Array.from(e.children).forEach(t=>e.appendChild(t.cloneNode(!0)));const t=Number(n.getAttribute("data-speed")||30);e.style.setProperty("--sold-duration",`${Math.max(10,t)}s`);let a=!1;const o=()=>{a||(e.style.animationPlayState="paused",a=!0)},r=()=>{a&&(e.style.animationPlayState="running",a=!1)};n.addEventListener("mouseenter",o),n.addEventListener("mouseleave",r),n.addEventListener("focusin",o),n.addEventListener("focusout",r)}}const a=document.getElementById("ownersLeadForm");if(!a)return;const o=(e,t)=>{const n=document.getElementById(e),o=a.querySelector(`.error[data-for="${e}"]`);n&&o&&(t?(n.classList.add("invalid"),o.textContent=t):(n.classList.remove("invalid"),o.textContent=""))},r=()=>{let e=!0;const n=document.getElementById("fullName"),a=document.getElementById("countryCode"),r=document.getElementById("phone"),s=document.getElementById("email"),c=document.getElementById("language");return n.value.trim()?o("fullName"):(o("fullName",t("validation.fullName","Please enter your full name")),e=!1),a.value.trim()?o("countryCode"):(o("countryCode",t("validation.countryCode","Please enter a country code")),e=!1),r.value.trim()?o("phone"):(o("phone",t("validation.phone","Please enter a phone number")),e=!1),s.value.trim()&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.value)?o("email"):(o("email",t("validation.email","Enter a valid email address")),e=!1),c.value.trim()?o("language"):(o("language",t("validation.language","Select a language")),e=!1),e};["fullName","countryCode","phone","email","language"].forEach(e=>{const t=document.getElementById(e);t&&t.addEventListener("input",()=>r()),t&&t.addEventListener("change",()=>r())});let s=a.querySelector('input[name="website"]');s||(s=document.createElement("input"),s.type="text",s.name="website",s.autocomplete="off",s.tabIndex=-1,s.style.position="absolute",s.style.left="-9999px",a.appendChild(s)),a.addEventListener("submit",async e=>{e.preventDefault();const n=a.querySelector(".form-status");if(!r())return void(n&&(n.style.display="block",n.textContent=t("form.fixErrors","Please fix the errors above.")));if(s&&s.value)return;const o=new FormData(a),c=Object.fromEntries(o.entries());if(!c.recaptchaToken){const e=document.getElementById("recaptchaTokenOwners");if(e&&e.value&&(c.recaptchaToken=e.value),!c.recaptchaToken&&window.grecaptcha&&"function"==typeof grecaptcha.execute){const t=e&&e.getAttribute("data-site-key");if(t&&"function"==typeof grecaptcha.ready)try{await new Promise(e=>{grecaptcha.ready(function(){grecaptcha.execute(t,{action:"owners_lead"}).then(function(t){c.recaptchaToken=t||"",e()}).catch(function(){e()})})})}catch(e){}}}try{n&&(n.style.display="block",n.textContent=t("form.sending","Sending..."));const e=a.querySelector('button[type="submit"]');e&&(e.disabled=!0,e.style.opacity="0.7");const o=new URLSearchParams;o.append("name",c.name||""),o.append("email",c.email||""),o.append("phone",`${c.countryCode||""} ${c.phone||""}`.trim()),o.append("message","For Sellers page SELLER lead"),o.append("lead_type","seller"),o.append("language",c.language||""),o.append("neighborhood",c.neighborhood||""),o.append("size",c.size||""),o.append("rooms",c.rooms||""),o.append("occupancy",c.occupancy||""),o.append("recaptchaToken",c.recaptchaToken||"");const r=await fetch("/api/leads/contact",{method:"POST",headers:{"x-csrf-token":c._csrf||document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:o.toString()});if(!r.ok)throw new Error("Failed to submit");const s=await r.json();s&&s.success&&window.analytics&&window.analytics.trackFormSubmit&&window.analytics.trackFormSubmit("seller_form",null,null,{neighborhood:c.neighborhood||null,size:c.size||null,rooms:c.rooms||null}),n.textContent=s&&s.success?t("form.successShort","Thanks! We will reach out shortly."):t("form.submitted","Submission received.");const l=document.getElementById("toast");l&&(l.textContent=t("form.successToast","Thank you! Your message was successfully sent."),l.classList.remove("error"),l.classList.add("show"),setTimeout(()=>l.classList.remove("show"),3e3)),a.reset()}catch(e){n&&(n.style.display="block",n.textContent=t("form.errorStatus","There was a problem. Please try again."));const a=document.getElementById("toast");a&&(a.textContent=t("form.errorToast","Something went wrong. Please try again later."),a.classList.add("error","show"),setTimeout(()=>a.classList.remove("show"),3e3))}finally{const e=a.querySelector('button[type="submit"]');e&&(e.disabled=!1,e.style.opacity="1")}})}();