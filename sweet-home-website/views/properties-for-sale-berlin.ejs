<% useMainContainer = false %>
<% useHomeHeader = true %>
<link rel="stylesheet" href="/css/home.css" />
<link rel="stylesheet" href="/css/berlin-landing.min.css" />

<div id="locations-data" data-locations='<%- (typeof minifyJSON !== 'undefined' ? minifyJSON(locations) : JSON.stringify(locations)).replace(/'/g, '&#39;') %>' style="display:none"></div>

<div class="berlin-landing-page">
  <!-- 1) Hero: title, description, CTA -->
  <section class="berlin-hero" aria-labelledby="berlin-hero-title">
    <div class="berlin-hero__bg">
      <img src="/images/berlin-hero.jpg" alt="<%= t('berlin.heroImgAlt','Berlin skyline – properties for sale in Berlin, Germany') %>" fetchpriority="high" decoding="async">
    </div>
    <div class="berlin-hero__overlay"></div>
    <div class="berlin-hero__content">
      <h1 id="berlin-hero-title" class="berlin-hero__title"><%= t('berlin.heroTitle','Properties for Sale in Berlin') %></h1>
      <p class="berlin-hero__description"><%= t('berlin.heroDescription','Discover carefully selected properties for sale in Berlin, one of Europe\'s most attractive real estate markets. Sweet Home supports international buyers and investors with expert guidance and access to residential and investment opportunities across the city.') %></p>
    </div>
  </section>

  <!-- 2) Search bar section (Germany default) -->
  <section id="berlin-search" class="berlin-search" aria-labelledby="berlin-search-title">
    <h2 id="berlin-search-title" class="berlin-search__title sr-only"><%= t('home.search.cta','Search Properties') %></h2>
    <form action="/properties" method="get" class="berlin-search__form">
      <div class="berlin-search__row">
        <label class="sr-only" for="country"><%= t('forms.country','Country') %></label>
        <select id="country" name="country" aria-label="<%= t('forms.country','Country') %>">
          <option value=""><%= t('forms.country','Country') %></option>
          <% Object.keys(locations).forEach(c => { %>
            <option value="<%= c %>" <%= c === 'Germany' ? 'selected' : '' %>><%= c %></option>
          <% }); %>
        </select>
        <label class="sr-only" for="city"><%= t('forms.city','City') %></label>
        <select id="city" name="city" aria-label="<%= t('forms.city','City') %>">
          <option value=""><%= t('forms.city','City') %></option>
          <% if (locations.Germany) { Object.keys(locations.Germany).forEach(ct => { %>
            <option value="<%= ct %>" <%= ct === 'Berlin' ? 'selected' : '' %>><%= ct %></option>
          <% }); } %>
        </select>
        <label class="sr-only" for="neighborhood"><%= t('forms.neighborhood','Neighborhood') %></label>
        <select id="neighborhood" name="neighborhood" disabled aria-label="<%= t('forms.neighborhood','Neighborhood') %>">
          <option value=""><%= t('forms.neighborhood','Neighborhood') %></option>
        </select>
        <label class="sr-only" for="operation"><%= t('forms.operation','Operation') %></label>
        <select id="operation" name="operation">
          <option value=""><%= t('forms.anyOperation','Any Operation') %></option>
          <option value="buy" selected><%= t('forms.operations.buy','Buy') %></option>
          <option value="rent"><%= t('forms.operations.rent','Rent') %></option>
        </select>
        <label class="sr-only" for="type"><%= t('forms.propertyType','Property Type') %></label>
        <select id="type" name="type">
          <option value=""><%= t('forms.anyType','Any Type') %></option>
          <option><%= t('forms.types.apartment','Apartment') %></option>
          <option><%= t('forms.types.house','House') %></option>
          <option><%= t('forms.types.villa','Villa') %></option>
          <option><%= t('forms.types.land','Land') %></option>
        </select>
        <button type="submit"><%= t('home.search.cta','Search Properties') %></button>
      </div>
    </form>
  </section>

  <!-- 3) Featured properties: 3x3 grid, handpicked style -->
  <section class="section featured berlin-featured" aria-labelledby="recommended-heading">
    <h2 id="recommended-heading" class="berlin-featured__title"><%= t('berlin.featuredTitle','Featured properties') %></h2>
    <div class="berlin-featured__grid" id="berlinRecommended">
      <% (recommendedProperties || []).forEach(property => { %>
        <%
          const photoUrl = (property.photos && property.photos[0]) ? property.photos[0] : '/img/property-placeholder.jpg';
          const size = property.size ? `${property.size} m²` : null;
          const beds = (typeof property.rooms !== 'undefined' && property.rooms !== null) ? property.rooms : null;
          const baths = (typeof property.bathrooms !== 'undefined' && property.bathrooms !== null) ? property.bathrooms : null;
          const priceText = property.price && Number(property.price) > 0 ? '€' + Number(property.price).toLocaleString('en-US') : '';
        %>
        <article class="property-card">
          <a href="/properties/<%= property.slug %>" class="property-card-link">
            <div class="img-wrap" <%= priceText ? `data-price="${priceText}"` : '' %>>
              <img src="<%= photoUrl %>" alt="<%= property.title %>" loading="lazy" decoding="async" onerror="this.src='/img/property-placeholder.jpg'">
            </div>
            <div class="meta">
              <div class="title"><%= property.title %></div>
              <% if (priceText) { %><div class="price"><%= priceText %></div><% } %>
              <div class="location">
                <span class="icon icon-16 icon-inline icon-mask icon-location" style="color: currentColor;"></span>
                <%= property.neighborhood || property.city %>, <%= property.country %>
              </div>
              <div class="features-row">
                <% if (size) { %>
                  <div class="feature">
                    <span class="icon icon-16 icon-inline icon-mask icon-size"></span>
                    <span><%= size %></span>
                  </div>
                <% } %>
                <% if (beds !== null) { %>
                  <div class="feature">
                    <span class="icon icon-16 icon-inline icon-mask icon-bed"></span>
                    <span><%= beds %> bed<%= Number(beds) === 1 ? '' : 's' %></span>
                  </div>
                <% } %>
                <% if (baths !== null) { %>
                  <div class="feature">
                    <span class="icon icon-16 icon-inline icon-mask icon-bath"></span>
                    <span><%= baths %> bath<%= Number(baths) === 1 ? '' : 's' %></span>
                  </div>
                <% } %>
              </div>
              <span class="learn-more"><%= t('properties.list.viewDetails','View details') %> →</span>
            </div>
          </a>
        </article>
      <% }); %>
    </div>
    <% if (!recommendedProperties || recommendedProperties.length === 0) { %>
      <p class="section-empty"><%= t('properties.list.noResults','No properties found.') %> <a href="/properties?country=Germany"><%= t('home.search.cta','Search Properties') %></a></p>
    <% } else { %>
      <p class="section-cta">
        <a href="/properties?country=Germany" class="btn btn-primary"><%= t('berlin.viewAll','View all properties in Berlin') %></a>
      </p>
    <% } %>
  </section>

  <!-- 4) Why Invest in Berlin Real Estate -->
  <section class="berlin-content section berlin-why-invest" aria-labelledby="berlin-why-invest-heading">
    <div class="berlin-content__inner">
      <h2 id="berlin-why-invest-heading" class="berlin-content__title"><%= t('berlin.whyInvestTitle','Why Invest in Berlin Real Estate?') %></h2>
      <div class="berlin-content__body">
        <p><%= t('berlin.whyInvestP1','Berlin remains one of Europe\'s most resilient residential markets, supported by steady population growth and sustained international migration. With nearly 3.9 million residents and a structural housing shortage requiring over 220,000 new apartments by 2040, demand continues to outpace supply. Vacancy rates remain critically low at around 0.3%, reinforcing rental market pressure.') %></p>
        <p><%= t('berlin.whyInvestP2','While purchase prices have slightly corrected in the past year, asking rents have continued to rise strongly, increasing by approximately 12% in 2024 and more than 50% since 2019. This combination of rental growth and limited new construction creates attractive long-term fundamentals for investors focused on stable income and capital preservation within Germany\'s capital city.') %></p>
      </div>
    </div>
  </section>

  <!-- 5) Best Areas to Buy Property in Berlin -->
  <section class="berlin-content section berlin-best-areas" aria-labelledby="berlin-areas-heading">
    <div class="berlin-content__inner">
      <h2 id="berlin-areas-heading" class="berlin-content__title"><%= t('berlin.bestAreasTitle','Best Areas to Buy Property in Berlin') %></h2>
      <p class="berlin-content__intro"><%= t('berlin.bestAreasIntro','Berlin offers distinct submarkets suited to different investment strategies:') %></p>
      <ul class="berlin-areas__list">
        <li class="berlin-areas__item"><strong>Mitte</strong> – <%= t('berlin.bestAreasMitte','Prime central district with average prices around €6,600–8,300/m² and strong rental demand driven by professionals and international residents.') %></li>
        <li class="berlin-areas__item"><strong>Charlottenburg-Wilmersdorf</strong> – <%= t('berlin.bestAreasCharlottenburg','Established West Berlin location combining prestige and stability, with solid long-term value retention.') %></li>
        <li class="berlin-areas__item"><strong>Pankow</strong> – <%= t('berlin.bestAreasPankow','Popular with families and young professionals, showing rental growth momentum and ongoing development.') %></li>
        <li class="berlin-areas__item"><strong>Neukölln</strong> – <%= t('berlin.bestAreasNeukoelln','Dynamic district with strong rent increases and continued urban transformation.') %></li>
        <li class="berlin-areas__item"><strong>Lichtenberg &amp; Marzahn-Hellersdorf</strong> – <%= t('berlin.bestAreasLichtenberg','More affordable entry points with emerging growth potential as rental spreads narrow across the city.') %></li>
      </ul>
      <p class="berlin-content__outro"><%= t('berlin.bestAreasOutro','These districts reflect Berlin\'s diverse residential landscape, from prime core locations to growth-oriented submarkets benefiting from citywide supply constraints.') %></p>
    </div>
  </section>

  <!-- 6) FAQ: Berlin real estate investment -->
  <section class="berlin-faq section" aria-labelledby="berlin-faq-heading">
    <h2 id="berlin-faq-heading" class="berlin-faq__title"><%= t('berlin.faqTitle','Frequently asked questions about buying property in Berlin') %></h2>
    <div class="berlin-faq__list">
      <article class="berlin-faq__item">
        <h3 class="berlin-faq__question">
          <button type="button" class="berlin-faq__trigger" aria-expanded="false" aria-controls="berlin-faq-a1" id="berlin-faq-q1" data-faq-toggle>
            <%= t('berlin.faqQ1','Why should I consider investing in Berlin real estate?') %>
          </button>
        </h3>
        <div class="berlin-faq__answer" id="berlin-faq-a1" role="region" aria-labelledby="berlin-faq-q1" hidden>
          <p><%= t('berlin.faqA1','Berlin is one of Europe\'s most attractive real estate markets. The city has strong demographic growth, a robust economy, and ongoing demand for housing. According to the Berlin Housing Market Report 2025 (Berlin Hyp & CBRE), the capital needs around 222,000 new apartments by 2040, plus land provision for a further 50,000 units. Asking rents rose again in 2024 (by 12% to €15.79 per m² on average), making Berlin one of the top cities in Germany for rental dynamics. For investors, this combination of demand, limited supply, and rental growth supports long-term value and income potential.') %></p>
        </div>
      </article>
      <article class="berlin-faq__item">
        <h3 class="berlin-faq__question">
          <button type="button" class="berlin-faq__trigger" aria-expanded="false" aria-controls="berlin-faq-a2" id="berlin-faq-q2" data-faq-toggle>
            <%= t('berlin.faqQ2','How have Berlin property prices developed recently?') %>
          </button>
        </h3>
        <div class="berlin-faq__answer" id="berlin-faq-a2" role="region" aria-labelledby="berlin-faq-q2" hidden>
          <p><%= t('berlin.faqA2','In 2024, asking prices for condominiums in Berlin decreased slightly by 0.9% to an average of €5,696 per m², while asking prices for apartment buildings fell by 4.4% to €3,041 per m². This reflects higher interest rates and economic uncertainty. At the same time, asking rents increased by 12% to €15.79 per m², with Berlin showing the highest rent dynamics among Germany\'s seven largest cities. So while purchase prices have corrected, rental income potential has strengthened, which can make Berlin attractive for buy-to-let and long-term investment.') %></p>
        </div>
      </article>
      <article class="berlin-faq__item">
        <h3 class="berlin-faq__question">
          <button type="button" class="berlin-faq__trigger" aria-expanded="false" aria-controls="berlin-faq-a3" id="berlin-faq-q3" data-faq-toggle>
            <%= t('berlin.faqQ3','What is the long-term outlook for the Berlin housing market?') %>
          </button>
        </h3>
        <div class="berlin-faq__answer" id="berlin-faq-a3" role="region" aria-labelledby="berlin-faq-q3" hidden>
          <p><%= t('berlin.faqA3','Population forecasts assume growth of around 5% from 2021 to 2040, and the Urban Development Plan Housing 2040 targets 222,000 new apartments plus land for 50,000 more. The housing shortage remains a key challenge, which supports sustained demand. The institutional transaction market also recovered in 2024 (volume increased to €2.9 billion from €1.8 billion the previous year). Industry experts such as Berlin Hyp and CBRE indicate that if interest rates remain stable, a further slight increase in the transaction market can be expected in 2025, underlining continued investor interest in Berlin residential real estate.') %></p>
        </div>
      </article>
      <article class="berlin-faq__item">
        <h3 class="berlin-faq__question">
          <button type="button" class="berlin-faq__trigger" aria-expanded="false" aria-controls="berlin-faq-a4" id="berlin-faq-q4" data-faq-toggle>
            <%= t('berlin.faqQ4','Where is new housing being built in Berlin?') %>
          </button>
        </h3>
        <div class="berlin-faq__answer" id="berlin-faq-a4" role="region" aria-labelledby="berlin-faq-q4" hidden>
          <p><%= t('berlin.faqA4','In 2024, around 215 construction projects with roughly 43,530 new apartments were in planning or construction—a significant increase compared to the previous year (34,940). Most large rental housing projects are concentrated outside the S-Bahn ring and in the Berlin metropolitan area; only about 14.6% of projects were within the ring, reflecting limited free land in the inner city. Districts such as Marzahn-Hellersdorf, Spandau, Pankow, and the metropolitan area (e.g. Potsdam, Barnim) are seeing substantial new development. Both state-owned housing companies and private developers are active, offering a mix of subsidised and market-rate housing and investment opportunities.') %></p>
        </div>
      </article>
      <article class="berlin-faq__item">
        <h3 class="berlin-faq__question">
          <button type="button" class="berlin-faq__trigger" aria-expanded="false" aria-controls="berlin-faq-a5" id="berlin-faq-q5" data-faq-toggle>
            <%= t('berlin.faqQ5','Is now a good time to buy property in Berlin?') %>
          </button>
        </h3>
        <div class="berlin-faq__answer" id="berlin-faq-a5" role="region" aria-labelledby="berlin-faq-q5" hidden>
          <p><%= t('berlin.faqA5','Current conditions can be favourable for certain investors: purchase prices for condominiums and apartment buildings have adjusted from previous highs, while demand for housing and rental growth remain strong. The recalibration of the market to a new price level is seen as largely complete, and institutional interest in residential assets has increased again due to housing shortage and the resilience of the sector. Whether it\'s the right time for you depends on your goals, financing, and target area. Sweet Home can help you explore carefully selected properties and provide expert guidance for buying or investing in Berlin.') %></p>
        </div>
      </article>
    </div>
    <p class="berlin-faq__source"><%= t('berlin.faqSource','Sources: Berlin Hyp & CBRE Housing Market Report Berlin 2025.') %> <a href="https://www.berlinhyp.de/en/newsroom/press-information/housing-market-report-berlin-2025-asking-rents-continue-to-rise-rapidly" rel="noopener noreferrer" target="_blank">Berlin Hyp &amp; CBRE Housing Market Report Berlin 2025</a></p>
  </section>
</div>

<script>
document.querySelectorAll('[data-faq-toggle]').forEach(function(btn) {
  btn.addEventListener('click', function() {
    var expanded = this.getAttribute('aria-expanded') === 'true';
    var targetId = this.getAttribute('aria-controls');
    var target = targetId ? document.getElementById(targetId) : null;
    this.setAttribute('aria-expanded', !expanded);
    if (target) target.hidden = expanded;
  });
});
</script>
<script>
// Header solidify on scroll (same as home)
(function headerShrink() {
  var header = document.querySelector('.site-header.gradient') || document.querySelector('.site-header');
  if (!header) return;
  function update() {
    if (window.scrollY > 40) header.classList.add('shrink');
    else header.classList.remove('shrink');
  }
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function run() {
      update();
      window.addEventListener('scroll', update, { passive: true });
    });
  } else {
    update();
    window.addEventListener('scroll', update, { passive: true });
  }
})();

(function() {
  var locationsEl = document.getElementById('locations-data');
  if (locationsEl && typeof window !== 'undefined') {
    try {
      window.locations = JSON.parse(locationsEl.getAttribute('data-locations') || '{}');
    } catch (e) {}
  }
  var countrySelect = document.getElementById('country');
  var citySelect = document.getElementById('city');
  var neighborhoodSelect = document.getElementById('neighborhood');
  if (countrySelect && citySelect && neighborhoodSelect && window.locations) {
    citySelect.disabled = false;
    countrySelect.addEventListener('change', function() {
      var country = this.value;
      citySelect.innerHTML = '<option value="">' + (document.documentElement.lang === 'de' ? 'Stadt' : document.documentElement.lang === 'es' ? 'Ciudad' : 'City') + '</option>';
      neighborhoodSelect.innerHTML = '<option value="">' + (document.documentElement.lang === 'de' ? 'Stadtteil' : document.documentElement.lang === 'es' ? 'Barrio' : 'Neighborhood') + '</option>';
      neighborhoodSelect.disabled = true;
      if (country && window.locations[country]) {
        Object.keys(window.locations[country]).forEach(function(ct) {
          var opt = document.createElement('option');
          opt.value = ct;
          opt.textContent = ct;
          citySelect.appendChild(opt);
        });
        citySelect.disabled = false;
      } else {
        citySelect.disabled = true;
      }
    });
    citySelect.addEventListener('change', function() {
      var country = countrySelect.value;
      var city = this.value;
      neighborhoodSelect.innerHTML = '<option value="">' + (document.documentElement.lang === 'de' ? 'Stadtteil' : document.documentElement.lang === 'es' ? 'Barrio' : 'Neighborhood') + '</option>';
      if (country && city && window.locations[country] && window.locations[country][city]) {
        var neighborhoods = window.locations[country][city];
        if (Array.isArray(neighborhoods) && neighborhoods.length > 0) {
          neighborhoods.forEach(function(n) {
            var opt = document.createElement('option');
            opt.value = n;
            opt.textContent = n;
            neighborhoodSelect.appendChild(opt);
          });
          neighborhoodSelect.disabled = false;
        } else {
          neighborhoodSelect.disabled = false;
        }
      } else {
        neighborhoodSelect.disabled = true;
      }
    });
    if (countrySelect.value === 'Germany' && window.locations.Germany) {
      if (citySelect.options.length <= 1) {
        Object.keys(window.locations.Germany).forEach(function(ct) {
          var opt = document.createElement('option');
          opt.value = ct;
          opt.textContent = ct;
          citySelect.appendChild(opt);
        });
      }
      citySelect.value = 'Berlin';
      citySelect.dispatchEvent(new Event('change', { bubbles: true }));
    }
  }
})();
</script>
