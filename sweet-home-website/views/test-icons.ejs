<% title = 'Icon Theme Test' %>
<% useMainContainer = true %>

<style>
  .test-container {
    padding: 2rem;
    max-width: 800px;
    margin: 0 auto;
  }
  .test-section {
    margin: 2rem 0;
    padding: 1.5rem;
    background: #f9fafb;
    border-radius: 8px;
  }
  .icon-test {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin: 1rem 0;
    padding: 1rem;
    background: white;
    border-radius: 4px;
  }
  .debug-info {
    font-family: monospace;
    font-size: 0.85rem;
    color: #666;
    background: #fff;
    padding: 0.5rem;
    border-radius: 4px;
    margin-top: 0.5rem;
  }
</style>

<div class="test-container">
  <h1>Icon Theme Test Page</h1>
  
  <div class="test-section">
    <h2>Current Theme: <strong><%= getActiveTheme ? getActiveTheme() : 'unknown' %></strong></h2>
    <% if (getActiveTheme && getActiveTheme() === 'default') { %>
      <div style="margin-top: 1rem; padding: 1rem; background: #fef3c7; border: 1px solid #fbbf24; border-radius: 8px;">
        <strong>⚠️ Theme Not Active</strong>
        <p style="margin: 0.5rem 0 0 0; color: #78350f;">
          The theme is showing as "default" instead of "holiday". This usually means:
        </p>
        <ul style="margin: 0.5rem 0 0 1.5rem; color: #78350f;">
          <li><strong>If on Render/Production:</strong> Set <code>ICON_THEME=holiday</code> in your Render dashboard → Environment variables</li>
          <li><strong>If local:</strong> Make sure <code>ICON_THEME=holiday</code> is in your <code>.env</code> file and restart the server</li>
        </ul>
      </div>
    <% } %>
    
    <div class="icon-test">
      <span class="icon icon-32 icon-mask icon-bed" style="color: #000;"></span>
      <div>
        <strong>Bed Icon</strong>
        <div class="debug-info">Path: <%= getIconPath ? getIconPath('bed') : 'N/A' %></div>
      </div>
    </div>
    
    <div class="icon-test">
      <span class="icon icon-32 icon-mask icon-bath" style="color: #000;"></span>
      <div>
        <strong>Bath Icon</strong>
        <div class="debug-info">Path: <%= getIconPath ? getIconPath('bath') : 'N/A' %></div>
      </div>
    </div>
    
    <div class="icon-test">
      <span class="icon icon-32 icon-mask icon-size" style="color: #000;"></span>
      <div>
        <strong>Size Icon</strong>
        <div class="debug-info">Path: <%= getIconPath ? getIconPath('size') : 'N/A' %></div>
      </div>
    </div>
    
    <div class="icon-test">
      <span class="icon icon-32 icon-mask icon-location" style="color: #000;"></span>
      <div>
        <strong>Location Icon</strong>
        <div class="debug-info">Path: <%= getIconPath ? getIconPath('location') : 'N/A' %></div>
      </div>
    </div>
  </div>
  
  <div class="test-section">
    <h2>Old CSS Class Method (for comparison)</h2>
    <div class="icon-test">
      <span class="icon icon-32 icon-mask icon-bed" style="color: #000;"></span>
      <div>
        <strong>Bed Icon (CSS class)</strong>
        <div class="debug-info">Using CSS class: .icon-bed</div>
      </div>
    </div>
  </div>
  
  <div class="test-section">
    <h2>CSS Variables Check</h2>
    <div class="debug-info" id="css-vars"></div>
    <script>
      const root = getComputedStyle(document.documentElement);
      const bedVar = root.getPropertyValue('--icon-bed');
      const bathVar = root.getPropertyValue('--icon-bath');
      const sizeVar = root.getPropertyValue('--icon-size');
      const locationVar = root.getPropertyValue('--icon-location');
      
      document.getElementById('css-vars').innerHTML = `
        --icon-bed: ${bedVar || 'NOT SET'}<br>
        --icon-bath: ${bathVar || 'NOT SET'}<br>
        --icon-size: ${sizeVar || 'NOT SET'}<br>
        --icon-location: ${locationVar || 'NOT SET'}
      `;
    </script>
  </div>
</div>

